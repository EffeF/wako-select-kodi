!function(f,g){"object"==typeof exports&&"object"==typeof module?module.exports=g(require("ionic.angular"),require("ng.common"),require("ng.core"),require("ng.forms"),require("ngx-translate.core"),require("rxjs"),require("tslib"),require("wako-app.mobile-sdk")):"function"==typeof define&&define.amd?define(["ionic.angular","ng.common","ng.core","ng.forms","ngx-translate.core","rxjs","tslib","wako-app.mobile-sdk"],g):"object"==typeof exports?exports.plugin=g(require("ionic.angular"),require("ng.common"),require("ng.core"),require("ng.forms"),require("ngx-translate.core"),require("rxjs"),require("tslib"),require("wako-app.mobile-sdk")):f.plugin=g(f["ionic.angular"],f["ng.common"],f["ng.core"],f["ng.forms"],f["ngx-translate.core"],f.rxjs,f.tslib,f["wako-app.mobile-sdk"])}(typeof self<"u"?self:this,(U,f,g,N,ee,re,te,ne)=>(()=>{"use strict";var oe={372:c=>{c.exports=U},223:c=>{c.exports=f},888:c=>{c.exports=g},951:c=>{c.exports=N},584:c=>{c.exports=ee},832:c=>{c.exports=re},748:c=>{c.exports=te},95:c=>{c.exports=ne}},R={};function u(c){var p=R[c];if(void 0!==p)return p.exports;var h=R[c]={exports:{}};return oe[c](h,h.exports,u),h.exports}u.d=(c,p)=>{for(var h in p)u.o(p,h)&&!u.o(c,h)&&Object.defineProperty(c,h,{enumerable:!0,get:p[h]})},u.o=(c,p)=>Object.prototype.hasOwnProperty.call(c,p),u.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var P={};return(()=>{u.r(P),u.d(P,{PluginModule:()=>W,default:()=>Le});var c=u(223),p=u(372);function h(e,r,t,n,o,i,s){try{var l=e[i](s),d=l.value}catch(O){return void t(O)}l.done?r(d):Promise.resolve(d).then(n,o)}function z(e){return function(){var r=this,t=arguments;return new Promise(function(n,o){var i=e.apply(r,t);function s(d){h(i,n,o,s,l,"next",d)}function l(d){h(i,n,o,s,l,"throw",d)}s(void 0)})}}var m=u(95);function M(...e){(0,m.wakoLog)("plugin.my-plugin",e)}var T=u(832),w=u(748);function a(e){return"function"==typeof e}const k=function ce(e){const t=e(n=>{Error.call(n),n.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((n,o)=>`${o+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function H(e,r){if(e){const t=e.indexOf(r);0<=t&&e.splice(t,1)}}class b{constructor(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let r;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const i of t)i.remove(this);else t.remove(this);const{initialTeardown:n}=this;if(a(n))try{n()}catch(i){r=i instanceof k?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{D(i)}catch(s){r=r??[],s instanceof k?r=[...r,...s.errors]:r.push(s)}}if(r)throw new k(r)}}add(r){var t;if(r&&r!==this)if(this.closed)D(r);else{if(r instanceof b){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(r)}}_hasParent(r){const{_parentage:t}=this;return t===r||Array.isArray(t)&&t.includes(r)}_addParent(r){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(r),t):t?[t,r]:r}_removeParent(r){const{_parentage:t}=this;t===r?this._parentage=null:Array.isArray(t)&&H(t,r)}remove(r){const{_finalizers:t}=this;t&&H(t,r),r instanceof b&&r._removeParent(this)}}function L(e){return e instanceof b||e&&"closed"in e&&a(e.remove)&&a(e.add)&&a(e.unsubscribe)}function D(e){a(e)?e():e.unsubscribe()}b.EMPTY=(()=>{const e=new b;return e.closed=!0,e})();const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},S={setTimeout(e,r,...t){const{delegate:n}=S;return n?.setTimeout?n.setTimeout(e,r,...t):setTimeout(e,r,...t)},clearTimeout(e){const{delegate:r}=S;return(r?.clearTimeout||clearTimeout)(e)},delegate:void 0};function B(e){S.setTimeout(()=>{const{onUnhandledError:r}=_;if(!r)throw e;r(e)})}function Y(){}const le=A("C",void 0,void 0);function A(e,r,t){return{kind:e,value:r,error:t}}let y=null;class I extends b{constructor(r){super(),this.isStopped=!1,r?(this.destination=r,L(r)&&r.add(this)):this.destination=be}static create(r,t,n){return new C(r,t,n)}next(r){this.isStopped?F(function ae(e){return A("N",e,void 0)}(r),this):this._next(r)}error(r){this.isStopped?F(function ue(e){return A("E",void 0,e)}(r),this):(this.isStopped=!0,this._error(r))}complete(){this.isStopped?F(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(r){this.destination.next(r)}_error(r){try{this.destination.error(r)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const pe=Function.prototype.bind;function q(e,r){return pe.call(e,r)}class he{constructor(r){this.partialObserver=r}next(r){const{partialObserver:t}=this;if(t.next)try{t.next(r)}catch(n){E(n)}}error(r){const{partialObserver:t}=this;if(t.error)try{t.error(r)}catch(n){E(n)}else E(r)}complete(){const{partialObserver:r}=this;if(r.complete)try{r.complete()}catch(t){E(t)}}}class C extends I{constructor(r,t,n){let o;if(super(),a(r)||!r)o={next:r??void 0,error:t??void 0,complete:n??void 0};else{let i;this&&_.useDeprecatedNextContext?(i=Object.create(r),i.unsubscribe=()=>this.unsubscribe(),o={next:r.next&&q(r.next,i),error:r.error&&q(r.error,i),complete:r.complete&&q(r.complete,i)}):o=r}this.destination=new he(o)}}function E(e){_.useDeprecatedSynchronousErrorHandling?function fe(e){_.useDeprecatedSynchronousErrorHandling&&y&&(y.errorThrown=!0,y.error=e)}(e):B(e)}function F(e,r){const{onStoppedNotification:t}=_;t&&S.setTimeout(()=>t(e,r))}const be={closed:!0,next:Y,error:function me(e){throw e},complete:Y},j="function"==typeof Symbol&&Symbol.observable||"@@observable";function _e(e){return e}let v=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(t,n,o){const i=function ge(e){return e&&e instanceof I||function ye(e){return e&&a(e.next)&&a(e.error)&&a(e.complete)}(e)&&L(e)}(t)?t:new C(t,n,o);return function de(e){if(_.useDeprecatedSynchronousErrorHandling){const r=!y;if(r&&(y={errorThrown:!1,error:null}),e(),r){const{errorThrown:t,error:n}=y;if(y=null,t)throw n}}else e()}(()=>{const{operator:s,source:l}=this;i.add(s?s.call(i,l):l?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(n){t.error(n)}}forEach(t,n){return new(n=G(n))((o,i)=>{const s=new C({next:l=>{try{t(l)}catch(d){i(d),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(t){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(t)}[j](){return this}pipe(...t){return function $(e){return 0===e.length?_e:1===e.length?e[0]:function(t){return e.reduce((n,o)=>o(n),t)}}(t)(this)}toPromise(t){return new(t=G(t))((n,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>n(i))})}}return e.create=r=>new e(r),e})();function G(e){var r;return null!==(r=e??_.Promise)&&void 0!==r?r:Promise}const Ee=function Se(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function K(e){return new v(r=>{(function je(e,r){var t,n,o,i;return(0,w.__awaiter)(this,void 0,void 0,function*(){try{for(t=(0,w.__asyncValues)(e);!(n=yield t.next()).done;)if(r.next(n.value),r.closed)return}catch(s){o={error:s}}finally{try{n&&!n.done&&(i=t.return)&&(yield i.call(t))}finally{if(o)throw o.error}}r.complete()})})(e,r).catch(t=>r.error(t))})}function V(e,r,t,n,o){return new Re(e,r,t,n,o)}class Re extends I{constructor(r,t,n,o,i,s){super(r),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=t?function(l){try{t(l)}catch(d){r.error(d)}}:super._next,this._error=o?function(l){try{o(l)}catch(d){r.error(d)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(l){r.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(r=this.onFinalize)||void 0===r||r.call(this))}}}function J(e,r){return function Ue(e){return r=>{if(function Oe(e){return a(e?.lift)}(r))return r.lift(function(t){try{return e(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}((t,n)=>{let o=null,i=0,s=!1;const l=()=>s&&!o&&n.complete();t.subscribe(V(n,d=>{o?.unsubscribe();let O=0;const X=i++;(function ke(e){if(e instanceof v)return e;if(null!=e){if(function we(e){return a(e[j])}(e))return function Ae(e){return new v(r=>{const t=e[j]();if(a(t.subscribe))return t.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if((e=>e&&"number"==typeof e.length&&"function"!=typeof e)(e))return function Ie(e){return new v(r=>{for(let t=0;t<e.length&&!r.closed;t++)r.next(e[t]);r.complete()})}(e);if(function se(e){return a(e?.then)}(e))return function qe(e){return new v(r=>{e.then(t=>{r.closed||(r.next(t),r.complete())},t=>r.error(t)).then(null,B)})}(e);if(function ve(e){return Symbol.asyncIterator&&a(e?.[Symbol.asyncIterator])}(e))return K(e);if(function Pe(e){return a(e?.[Ee])}(e))return function Ce(e){return new v(r=>{for(const t of e)if(r.next(t),r.closed)return;r.complete()})}(e);if(function Te(e){return a(e?.getReader)}(e))return function Fe(e){return K(function Me(e){return(0,w.__asyncGenerator)(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:n,done:o}=yield(0,w.__await)(t.read());if(o)return yield(0,w.__await)(void 0);yield yield(0,w.__await)(n)}}finally{t.releaseLock()}})}(e))}(e)}throw function xe(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}(e)})(e(d,X)).subscribe(o=V(n,Z=>n.next(r?r(d,Z,X,O++):Z),()=>{o=null,l()}))},()=>{s=!0,l()}))})}var x=u(888);let Q=(()=>{class e extends m.PluginBaseService{constructor(t){super(),this.sheet=t}initialize(){var t=this;return z(function*(){M("plugin initialized");const n=m.KodiAppService.checkAndConnectToCurrentHost;m.KodiAppService.checkAndConnectToCurrentHost=()=>new T.Observable(o=>{m.KodiAppService.getHosts().then(i=>{if(0===i.length)return o.next(null),void o.complete();if(1===i.length)return o.next(i[0]),void o.complete();const s=[];i.forEach(l=>{s.push({text:l.name,handler:()=>{o.next(l),o.complete()}})}),s.push({text:"Cancel",icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}),t.sheet.create({header:"Select your host",buttons:s}).then(l=>{l.present()})})}).pipe(J(o=>o?(0,T.from)(m.KodiAppService.setCurrentHost(o)):(0,T.of)(null)),J(()=>n.apply(m.KodiAppService)))})()}afterInstall(){M("plugin installed")}afterUpdate(){M("plugin updated")}setTranslation(t,n){}customAction(t,n){}beforeMovieMiddleware(t){throw new Error("Method not implemented.")}afterMovieMiddleware(t){throw new Error("Method not implemented.")}beforeShowMiddleware(t){throw new Error("Method not implemented.")}afterShowMiddleware(t){throw new Error("Method not implemented.")}beforeEpisodeMiddleware(t,n){throw new Error("Method not implemented.")}afterEpisodeMiddleware(t,n){throw new Error("Method not implemented.")}fetchExplorerFolderItem(){throw new Error("Method not implemented.")}getFileActionButtons(t,n,o,i,s,l){return z(function*(){throw new Error("Method not implemented.")})()}}return e.\u0275fac=function(t){return new(t||e)(x.\u0275\u0275inject(p.ActionSheetController))},e.\u0275prov=x.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var ze=u(951),He=u(584);let W=(()=>{class e extends m.PluginBaseModule{}return e.pluginService=Q,e.\u0275fac=function(){let r;return function(n){return(r||(r=x.\u0275\u0275getInheritedFactory(e)))(n||e)}}(),e.\u0275mod=x.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=x.\u0275\u0275defineInjector({providers:[Q],imports:[c.CommonModule,ze.FormsModule,p.IonicModule.forRoot(),He.TranslateModule.forRoot()]}),e})();const Le=W})(),P})());